(window.webpackJsonp=window.webpackJsonp||[]).push([[494],{"./state/sharing/init.js":function(e,t,n){"use strict";var r=n("./state/redux-store.ts"),s=n("./state/action-types.js"),i=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(i),c=n("../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(c),u=n("../node_modules/@babel/runtime/helpers/objectSpread2.js"),d=n.n(u),p=n("../node_modules/lodash-es/keyBy.js"),l=n("../node_modules/lodash-es/omit.js"),g=n("../node_modules/lodash-es/without.js"),h=n("./state/utils/without-persistence.js"),v=n("./state/utils/schema-utils.js"),y=n("./state/utils/reducer-utils.js"),I=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Ni:return!0;case s.Pi:case s.Oi:return!1}return e})),b=Object(v.a)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object",required:["ID"],properties:{ID:{type:"integer"},additional_external_users:{type:"array"},expires:{type:"string"},external_ID:{type:["string","null"]},external_display:{type:["string","null"]},external_name:{type:["string","null"]},external_profile_picture:{type:["string","null"]},issued:{type:"string"},label:{type:"string"},meta:{type:"object"},refresh_URL:{type:"string"},service:{type:"string"},sites:{type:"array"},status:{type:"string"},type:{type:"string"},user_ID:{type:"integer"}}}}},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Mi:var n=t.connections;return d()({},Object(p.a)(n,"ID"));case s.Qi:var r=t.connection;return Object(l.a)(e,r.ID);case s.Jn:var i=t.connection,c=i.keyring_connection_ID,u=i.site_ID,h=e[c],v=[].concat(a()(h.sites),[u.toString()]);return d()(d()({},e),{},o()({},c,d()(d()({},h),{},{sites:v})));case s.Ln:var y=t.connection,I=y.keyring_connection_ID,b=y.site_ID,j=e[I],_=Object(g.a)(j.sites,b.toString());return d()(d()({},e),{},o()({},I,d()(d()({},j),{},{sites:_})))}return e})),j=Object(y.a)({isFetching:I,items:b}),_=n("./state/utils/with-storage-key.js"),f=n("../node_modules/lodash-es/omitBy.js"),O=n("../node_modules/lodash-es/get.js"),D={type:"object",patternProperties:{"^\\d+$":{type:"object",required:["ID","connection_id","status"],properties:{ID:{type:"string"},connection_id:{type:"integer"},message:{type:"string"},share_date:{type:"integer"},result:{type:"object"},url:{type:"string"},status:{type:"string"}}}}};function m(e,t,n,r,s){return void 0!==s&&(e=d()(d()({},Object(O.a)(t,[n,r],{})),{},o()({},s,e))),d()(d()({},t),{},o()({},n,d()(d()({},Object(O.a)(t,[n],{})),{},o()({},r,e))))}var w=Object(v.a)(D,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Zn:var n=t.siteId,r=t.postId,i=t.actions;return m(i,e,n,r);case s.co:var o=t.siteId,c=t.postId,a=t.actionId;return m(Object(l.a)(Object(O.a)(e,[o,c],{}),[a]),e,o,c);case s.fo:var u=t.siteId,d=t.postId,p=t.item;return m(p,e,u,d,p.ID);case s.io:var g=t.siteId,h=t.postId,v=t.items;return v.forEach((function(t){return e=m(t,e,g,h,t.ID)})),e}return e})),x=Object(v.a)(D,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Wn:var n=t.siteId,r=t.postId,i=t.actions;return m(i,e,n,r)}return e})),P=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Zn:var n=t.siteId,r=t.postId;return m(!1,e,n,r);case s.Yn:var i=t.siteId,o=t.postId;return m(!1,e,i,o);case s.Xn:var c=t.siteId,a=t.postId;return m(!0,e,c,a)}return e})),k=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Wn:var n=t.siteId,r=t.postId;return m(!1,e,n,r);case s.Vn:var i=t.siteId,o=t.postId;return m(!1,e,i,o);case s.Un:var c=t.siteId,a=t.postId;return m(!0,e,c,a)}return e})),S=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.co:var n=t.siteId,r=t.postId,i=t.actionId;return m(!1,e,n,r,i);case s.bo:var o=t.siteId,c=t.postId,a=t.actionId;return m(!1,e,o,c,a);case s.ao:var u=t.siteId,d=t.postId,p=t.actionId;return m(!0,e,u,d,p)}return e})),q=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.fo:var n=t.siteId,r=t.postId,i=t.item;return m(!1,e,n,r,i.ID);case s.eo:var o=t.siteId,c=t.postId,a=t.actionId;return m(!1,e,o,c,a);case s.do:var u=t.siteId,d=t.postId,p=t.actionId;return m(!0,e,u,d,p)}return e})),z=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.io:var n=t.siteId,r=t.postId,i=t.share_date;return m({status:"success",shareDate:i},e,n,r);case s.ho:var o=t.siteId,c=t.postId;return m({status:"failure"},e,o,c);case s.go:var a=t.siteId,u=t.postId;return m({status:"requesting"},e,a,u);case s.jo:var d=t.siteId,p=t.postId;return m(void 0,e,d,p)}return e})),A=Object(y.a)({scheduled:w,published:x,fetchingSharePostActionsScheduled:P,fetchingSharePostActionsPublished:k,deletingSharePostAction:S,editingSharePostAction:q,schedulingSharePostActionStatus:z}),F=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Tn:var n=t.siteId,r=t.postId;return d()(d()({},e),{},o()({},n,d()(d()({},e[n]),{},o()({},r,{requesting:!0}))));case s.lo:var i=t.siteId,c=t.postId;return d()(d()({},e),{},o()({},i,d()(d()({},e[i]),{},o()({},c,{requesting:!1,success:!0}))));case s.ko:var a=t.siteId,u=t.postId,p=t.error;return d()(d()({},e),{},o()({},a,d()(d()({},e[a]),{},o()({},u,{requesting:!1,success:!1,error:p}))));case s.jo:var l=t.siteId,g=t.postId;return d()(d()({},e),{},o()({},l,d()(d()({},e[l]),{},o()({},g,void 0))))}return e})),L=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.On:var n=t.connectionId;return d()(d()({},e),{},o()({},n,!0));case s.Qn:var r=t.connectionId;return d()(d()({},e),{},o()({},r,!1));case s.Pn:var i=t.connectionId;return d()(d()({},e),{},o()({},i,!1))}return e})),U=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Gn:var n=t.siteId;return d()(d()({},e),{},o()({},n,!0));case s.Fn:var r=t.siteId;return d()(d()({},e),{},o()({},r,!1));case s.Hn:var i=t.siteId;return d()(d()({},e),{},o()({},i,!1))}return e})),C=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Fn:var n=t.siteId;return d()(d()({},e),{},o()({},n,!0))}return e})),R=Object(v.a)({type:"object",patternProperties:{"^\\d+$":{type:"object",required:["ID","site_ID"],properties:{ID:{type:"integer"},site_ID:{type:"integer"},user_ID:{type:"integer"},keyring_connection_ID:{type:"integer"},keyring_connection_user_ID:{type:"integer"},shared:{type:"boolean"},service:{type:"string"},label:{type:"string"},issued:{type:"string"},expires:{type:"string"},external_ID:{type:["string","null"]},external_name:{type:["string","null"]},external_display:{type:["string","null"]},external_profile_picture:{type:["string","null"]},external_profile_URL:{type:["string","null"]},external_follower_count:{type:["integer","null"]},status:{type:"string"},refresh_URL:{type:"string"},meta:{type:"object"}}}},additionalProperties:!1},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Fn:return d()(d()({},Object(f.a)(e,{site_ID:t.siteId})),Object(p.a)(t.data.connections,"ID"));case s.Jn:var n=t.connection;return d()(d()({},e),{},o()({},n.ID,n));case s.Ln:var r=t.connection.ID;return Object(l.a)(e,r);case s.Nn:var i=t.connection;return d()(d()({},e),{},o()({},i.ID,i));case s.Rn:var c=t.connection;return d()(d()({},e),{},o()({},c.ID,c))}return e})),J=Object(y.a)({fetchingConnection:L,fetchingConnections:U,fetchedConnections:C,connections:R,sharePostStatus:F,sharePostActions:A}),N=Object(v.a)({type:"object",additionalProperties:!1,patternProperties:{"^[a-z_]+$":{type:"object",required:["ID","connect_URL","description","genericon","icon","jetpack_support","label","multiple_external_user_ID_support","external_users_only","type"],properties:{ID:{type:"string"},connect_URL:{type:"string"},description:{type:"string"},genericon:{type:"object"},icon:{type:"string"},jetpack_module_required:{type:"string"},jetpack_support:{type:"boolean"},label:{type:"string"},multiple_external_user_ID_support:{type:"boolean"},external_users_only:{type:"boolean"},type:{type:"string"}}}}},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Si:return t.services}return e})),$=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Ti:return!0;case s.Vi:case s.Ui:return!1}return e})),Z=Object(y.a)({isFetching:$,items:N}),B=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Zb:return t.serviceName?t.serviceName:null}return e})),Q=Object(y.a)({keyring:j,publicize:J,services:Z,expandedService:B}),T=Object(_.a)("sharing",Q);Object(r.a)(["sharing"],T)},"./state/sharing/publicize/selectors.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return v})),n.d(t,"i",(function(){return y})),n.d(t,"h",(function(){return I}));var r=n("../node_modules/lodash-es/filter.js"),s=n("../node_modules/lodash-es/get.js"),i=n("./lib/create-selector/index.js"),o=n("./state/selectors/can-current-user.js"),c=n("./state/current-user/selectors.js"),a=n("./state/ui/selectors/get-selected-site-id.js");n("./state/sharing/init.js");var u=Object(i.a)((function(e,t,n){return Object(r.a)(e.sharing.publicize.connections,(function(e){return e.site_ID===t&&(e.shared||e.keyring_connection_user_ID===n)}))}),(function(e){return[e.sharing.publicize.connections]}));function d(e,t,n,s){return Object(r.a)(u(e,t,n),{service:s})}function p(e,t,n,s){return Object(r.a)(d(e,t,n,s),{status:"broken"})}function l(e,t){var n=Object(a.a)(e),s=Object(c.h)(e),i=d(e,n,s,t);return Object(o.b)(e,n,"edit_others_posts")?i:Object(r.a)(i,{user_ID:s})}function g(e,t){return Object(s.a)(e.sharing.publicize.fetchedConnections,[t],!1)}function h(e,t){return Object(s.a)(e.sharing.publicize.fetchingConnections,[t],!1)}function v(e,t,n){return Object(s.a)(e.sharing.publicize.sharePostStatus,[t,n,"requesting"],!1)}function y(e,t,n){return Object(s.a)(e.sharing.publicize.sharePostStatus,[t,n,"success"],!1)}function I(e,t,n){return!0===Object(s.a)(e.sharing.publicize.sharePostStatus,[t,n,"error"],!1)}},"./state/sites/selectors/get-site-plan.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("../node_modules/lodash-es/get.js"),s=n("./state/selectors/get-raw-site.js");function i(e,t){if(!t)return null;var n=Object(s.a)(e,t);return n?Object(r.a)(n.plan,"expired",!1)?n.jetpack?{product_id:2002,product_slug:"jetpack_free",product_name_short:"Free",free_trial:!1,expired:!1}:{product_id:1,product_slug:"free_plan",product_name_short:"Free",free_trial:!1,expired:!1}:n.plan:null}}}]);