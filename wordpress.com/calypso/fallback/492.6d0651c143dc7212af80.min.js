(window.webpackJsonp=window.webpackJsonp||[]).push([[492],{"./components/data/query-site-domains/index.jsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("../node_modules/prop-types/index.js"),i=n.n(a),r=n("../node_modules/react/index.js"),s=n("../node_modules/react-redux/es/index.js"),o=n("./state/sites/domains/selectors.js"),c=n("./state/sites/domains/actions.js");function u(e){var t=e.siteId,n=Object(s.d)();return Object(r.useEffect)((function(){n(function(e){return function(t,n){e&&!Object(o.f)(n(),e)&&t(Object(c.d)(e))}}(t))}),[n,t]),null}u.propTypes={siteId:i.a.number.isRequired}},"./lib/domains/constants.js":function(e,t,n){"use strict";n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return l}));var a={MAPPED:"MAPPED",REGISTERED:"REGISTERED",SITE_REDIRECT:"SITE_REDIRECT",WPCOM:"WPCOM",TRANSFER:"TRANSFER"},i={PENDING_OWNER:"PENDING_OWNER",PENDING_REGISTRY:"PENDING_REGISTRY",CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",PENDING_START:"PENDING_START"},r={OPENHRS:"OpenHRS",OPENSRS:"OpenSRS",WWD:"WWD",MAINTENANCE:"Registrar TLD Maintenance"},s={AVAILABLE:"available",AVAILABLE_PREMIUM:"available_premium",AVAILABILITY_CHECK_ERROR:"availability_check_error",CONFLICTING_CNAME_EXISTS:"conflicting_cname_exists",DISALLOWED:"blacklisted_domain",DOMAIN_SUGGESTIONS_THROTTLED:"domain_suggestions_throttled",DOTBLOG_SUBDOMAIN:"dotblog_subdomain",EMPTY_QUERY:"empty_query",EMPTY_RESULTS:"empty_results",FORBIDDEN:"forbidden_domain",FORBIDDEN_SUBDOMAIN:"forbidden_subdomain",IN_REDEMPTION:"in_redemption",INVALID:"invalid_domain",INVALID_QUERY:"invalid_query",INVALID_TLD:"invalid_tld",MAINTENANCE:"tld_in_maintenance",MAPPABLE:"mappable",MAPPED:"mapped_domain",MAPPED_OTHER_SITE_SAME_USER:"mapped_to_other_site_same_user",MAPPED_SAME_SITE_NOT_TRANSFERRABLE:"mapped_to_same_site_not_transferrable",MAPPED_SAME_SITE_TRANSFERRABLE:"mapped_to_same_site_transferrable",NOT_AVAILABLE:"not_available",NOT_REGISTRABLE:"available_but_not_registrable",PURCHASES_DISABLED:"domain_registration_unavailable",RECENTLY_UNMAPPED:"recently_mapped",RECENTLY_EXPIRED:"recently_expired",REGISTERED:"registered_domain",REGISTERED_OTHER_SITE_SAME_USER:"registered_on_other_site_same_user",REGISTERED_SAME_SITE:"registered_on_same_site",RESTRICTED:"restricted_domain",TLD_NOT_SUPPORTED:"tld_not_supported",TLD_NOT_SUPPORTED_AND_DOMAIN_NOT_AVAILABLE:"tld_not_supported_and_domain_not_available",TLD_NOT_SUPPORTED_TEMPORARILY:"tld_not_supported_temporarily",TRANSFER_PENDING:"transfer_pending",TRANSFER_PENDING_SAME_USER:"transfer_pending_same_user",TRANSFERRABLE:"transferrable",TRANSFERRABLE_PREMIUM:"transferrable_premium",UNKNOWN:"unknown",UNKOWN_ACTIVE:"unknown_active_domain_with_wpcom",WPCOM_STAGING_DOMAIN:"wpcom_staging_domain"},o={G_SUITE:{PROVIDER:"g-suite",SERVICE:"G-Suite"},MICROSOFT_OFFICE365:{PROVIDER:"microsoft-office365",SERVICE:"O365"},ZOHO_MAIL:{PROVIDER:"zoho-mail",SERVICE:"Zoho"}},c={TRANSFER_IN:"domain_transfer"},u={NONE:"NONE",PENDING:"PENDING",PENDING_ASYNC:"PENDING_ASYNC",ACCEPTED_CONTRACTUAL_MINIMUM:"ACCEPTED_CONTRACTUAL_MINIMUM",ACCEPTED_FULL:"ACCEPTED_FULL",DENIED:"DENIED",FORCED_ALL_CONTRACTUAL:"FORCED_ALL_CONTRACTUAL"},d={DISCOVERY_TXT_RECORD_NAME:"_domainconnect",API_URL:"public-api.wordpress.com/rest/v1.3/domain-connect"},l={SSL_DISABLED:"disabled",SSL_PENDING:"pending",SSL_ACTIVE:"active"}},"./lib/domains/utils/get-domain-type.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("./lib/domains/constants.js");function i(e){return"redirect"===e.type?a.i.SITE_REDIRECT:"transfer"===e.type?a.i.TRANSFER:e.wpcom_domain?a.i.WPCOM:e.has_registration?a.i.REGISTERED:a.i.MAPPED}},"./lib/make-json-schema-parser/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var a=n("../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(a),r=n("../node_modules/@babel/runtime/helpers/inherits.js"),s=n.n(r),o=n("../node_modules/@babel/runtime/helpers/createSuper.js"),c=n.n(o),u=n("../node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),d=n.n(u),l=n("../node_modules/is-my-json-valid/index.js"),_=n.n(l),p=n("../node_modules/lodash-es/identity.js"),m=function(e){s()(n,e);var t=c()(n);function n(e){var a;return i()(this,n),(a=t.call(this,"Failed to validate with JSON schema")).schemaErrors=e,a}return n}(d()(Error)),f=function(e){s()(n,e);var t=c()(n);function n(e,a,r){var s;return i()(this,n),(s=t.call(this,e.message)).inputData=a,s.transformer=r,s}return n}(d()(Error));t.c=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(){var r=Object.assign({greedy:!0,verbose:!0},i),s=_()(e,r),o=_.a.filter(Object.assign({},e,e.type&&"object"===e.type&&{additionalProperties:!1}));n=function(e){if(!s(e))throw new m(s.errors);return o(e)},t=function(e){try{return a(e)}catch(t){throw new f(t,e,a)}}};return function(e){return t||r(),t(n(e))}}},"./state/analytics/actions/compose-analytics.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("./state/action-types.js"),i=n("../node_modules/lodash-es/flatMap.js"),r=n("../node_modules/lodash-es/property.js");function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:a.B,meta:{analytics:Object(i.a)(t,Object(r.a)("meta.analytics"))}}}},"./state/data-layer/wpcom/sites/jitm/index.js":function(e,t,n){"use strict";var a,i=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),r=n.n(i),s=n("../node_modules/@babel/runtime/helpers/objectSpread2.js"),o=n.n(s),c=n("../node_modules/lodash-es/noop.js"),u=n("./lib/make-json-schema-parser/index.js"),d=n("./state/data-layer/wpcom/sites/jitm/schema.json"),l=n("./state/jitm/actions.js"),_=n("./state/data-layer/wpcom-http/utils.js"),p=n("./state/ui/selectors/get-selected-site-id.js"),m=n("./state/data-layer/wpcom-http/actions.js"),f=n("./state/action-types.js"),E=n("./state/data-layer/handler-registry.js"),b=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))};Object(E.b)("state/data-layer/wpcom/sites/jitm/index.js",(a={},r()(a,f.Ki,[Object(_.a)({fetch:function(e){return Object(m.a)({apiNamespace:"rest",method:"GET",path:"/v1.1/jetpack-blogs/".concat(e.siteId,"/rest-api/"),query:{path:"/jetpack/v4/jitm",query:JSON.stringify({message_path:e.messagePath}),http_envelope:1,locale:e.locale}},o()({},e))},onSuccess:function(e,t){return function(n,a){var i=e.siteId||e.site_id||Object(p.a)(a());n(Object(l.d)(i,e.messagePath,t))}},onError:function(e){return function(t,n){var a=e.siteId||e.site_id||Object(p.a)(n());t(Object(l.a)(a,e.messagePath))}},fromApi:Object(u.c)(d,(function(e){return e.data.map((function(e){return{message:b(e.content.message||""),description:b(e.content.description||""),classes:b(e.content.classes||""),icon:b(e.content.icon||""),featureClass:e.feature_class,CTA:{message:b(e.CTA.message),link:b(e.CTA.link||"")},tracks:e.tracks,action:e.action,template:e.template,id:e.id,isDismissible:e.is_dismissible}}))}))})]),r()(a,f.Ji,[Object(_.a)({fetch:function(e){return Object(m.a)({apiNamespace:"rest",method:"POST",path:"/jetpack-blogs/".concat(e.siteId,"/rest-api/"),query:{path:"/jetpack/v4/jitm",body:JSON.stringify({feature_class:e.featureClass,id:e.id}),http_envelope:1,json:!1}},e)},onSuccess:c.a,onError:c.a})]),a))},"./state/data-layer/wpcom/sites/jitm/schema.json":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema#","properties":{"data":{"items":{"properties":{"CTA":{"properties":{"hook":{"type":["string","null"]},"message":{"type":"string"},"primary":{"type":"boolean"},"newWindow":{"type":"boolean"}},"type":"object"},"content":{"properties":{"classes":{"type":"string"},"description":{"type":"string"},"icon":{"type":["string","null"]},"message":{"type":"string"},"list":{"items":{"properties":{"item":{"type":"string"},"url":{"type":["string","null"]}}},"type":"array"}},"type":"object"},"expires":{"type":"integer"},"feature_class":{"type":"string"},"id":{"type":"string"},"jitm_stats_url":{"type":"string"},"template":{"type":"string"},"ttl":{"type":"integer"},"url":{"type":"string"},"tracks":{"type":"object"},"action":{"type":"object"},"is_dismissible":{"type":"boolean"}},"type":"object"},"type":"array"}},"type":"object"}')},"./state/jitm/actions.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return l}));var a=n("../node_modules/@babel/runtime/helpers/objectSpread2.js"),i=n.n(a),r=n("../node_modules/lodash-es/get.js"),s=n("./state/action-types.js"),o=(n("./state/data-layer/wpcom/sites/jitm/index.js"),function(e,t,n){return{type:s.Ji,siteId:e,id:t,featureClass:n}}),c=function(e,t,n){return{type:s.Li,keyedPath:t+e,jitms:n.map((function(e){return i()(i()({},e),{},{lastUpdated:Date.now()})}))}},u=function(e,t){return{type:s.Li,keyedPath:t+e,jitms:[]}},d=function(e,t){"undefined"!=typeof window&&e!==Object(r.a)(window,"_jitm.siteId")&&(window._jitm={siteId:e,insert:function(n,a){return t(c(e,n,a))},clear:function(n){return t(u(e,n))}})},l=function(e,t,n){return{type:s.Ki,siteId:e,messagePath:t,locale:n}}},"./state/selectors/get-site-id.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("./state/sites/selectors/get-site.js");function i(e,t){if(!t)return null;var n=Object(a.a)(e,t);return n?n.ID:null}},"./state/sites/domains/actions.js":function(e,t,n){"use strict";n.d(t,"d",(function(){return C})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return L})),n.d(t,"f",(function(){return M})),n.d(t,"b",(function(){return B})),n.d(t,"e",(function(){return U}));var a=n("../node_modules/debug/src/browser.js"),i=n.n(a),r=n("../node_modules/lodash-es/map.js"),s=n("../node_modules/lodash-es/noop.js"),o=n("../packages/i18n-calypso/dist/esm/index.js");var c=n("./lib/domains/constants.js");function u(e){switch(e.gdpr_consent_status){case"NONE":return c.e.NONE;case"PENDING":return c.e.PENDING;case"PENDING_ASYNC":return c.e.PENDING_ASYNC;case"ACCEPTED_CONTRACTUAL_MINIMUM":return c.e.ACCEPTED_CONTRACTUAL_MINIMUM;case"ACCEPTED_FULL":return c.e.ACCEPTED_FULL;case"DENIED":return c.e.DENIED;case"FORCED_ALL_CONTRACTUAL":return c.e.FORCED_ALL_CONTRACTUAL;default:return null}}var d=n("./lib/domains/utils/get-domain-type.js");function l(e){return"pending_owner"===e.transfer_status?c.h.PENDING_OWNER:"pending_registry"===e.transfer_status?c.h.PENDING_REGISTRY:"cancelled"===e.transfer_status?c.h.CANCELLED:"completed"===e.transfer_status?c.h.COMPLETED:"pending_start"===e.transfer_status?c.h.PENDING_START:null}var _=n("../node_modules/lodash-es/mapKeys.js"),p=n("../node_modules/lodash-es/camelCase.js");function m(e){if(e)return Object(_.a)(e,(function(e,t){return Object(p.default)(t)}))}var f,E=function(e){var t,n,a=null;return e.transfer_start_date&&((a=new Date(e.transfer_start_date)).setDate(a.getDate()+7),a=a.toIsoString()),{autoRenewalDate:String(e.auto_renewal_date),adminEmail:e.admin_email,autoRenewing:Boolean(e.auto_renewing),blogId:Number(e.blog_id),bundledPlanSubscriptionId:e.bundled_plan_subscription_id,canSetAsPrimary:Boolean(e.can_set_as_primary),contactInfoDisclosureAvailable:Boolean(e.contact_info_disclosure_available),contactInfoDisclosed:Boolean(e.contact_info_disclosed),currentUserCanManage:Boolean(e.current_user_can_manage),domain:String(e.domain),domainLockingAvailable:Boolean(e.domain_locking_available),domainRegistrationAgreementUrl:(t=e,null!==(n=null==t?void 0:t.domain_registration_agreement_url)&&void 0!==n?n:null),emailForwardsCount:Number(e.email_forwards_count),expired:Boolean(e.expired),expiry:e.expiry?String(e.expiry):null,expirySoon:Boolean(e.expiry_soon),gdprConsentStatus:u(e),googleAppsSubscription:m(e.google_apps_subscription),hasRegistration:Boolean(e.has_registration),hasWpcomNameservers:e.has_wpcom_nameservers,hasZone:Boolean(e.has_zone),isLocked:Boolean(e.is_locked),isRenewable:Boolean(e.is_renewable),isRedeemable:Boolean(e.is_redeemable),isEligibleForInboundTransfer:Boolean(e.is_eligible_for_inbound_transfer),isAutoRenewing:Boolean(e.auto_renewing),isPendingIcannVerification:Boolean(e.is_pending_icann_verification),isPrimary:Boolean(e.primary_domain),isPendingWhoisUpdate:Boolean(e.pending_whois_update),isSubdomain:Boolean(e.is_subdomain),isWPCOMDomain:Boolean(e.wpcom_domain),isWpcomStagingDomain:Boolean(e.is_wpcom_staging_domain),manualTransferRequired:Boolean(e.manual_transfer_required),mustRemovePrivacyBeforeContactUpdate:Boolean(e.must_remove_privacy_before_contact_update),newRegistration:Boolean(e.new_registration),name:String(e.domain),owner:String(e.owner),partnerDomain:Boolean(e.partner_domain),pendingRegistration:Boolean(e.pending_registration),pendingRegistrationTime:String(e.pending_registration_time),pendingTransfer:e.pending_transfer,pointsToWpcom:Boolean(e.points_to_wpcom),privateDomain:e.private_domain,privacyAvailable:Boolean(e.privacy_available),registrar:String(e.registrar),registrationDate:String(e.registration_date),renewableUntil:String(e.renewable_until),redeemableUntil:String(e.redeemable_until),sslStatus:e.ssl_status?String(e.ssl_status):null,subscriptionId:e.subscription_id,supportsDomainConnect:Boolean(e.supports_domain_connect),supportsGdprConsentManagement:Boolean(e.supports_gdpr_consent_management),supportsTransferApproval:Boolean(e.supports_transfer_approval),tldMaintenanceEndTime:e.tld_maintenance_end_time,transferAwayEligibleAt:e.transfer_away_eligible_at?String(e.transfer_away_eligible_at):null,transferLockOnWhoisUpdateOptional:Boolean(e.transfer_lock_on_whois_update_optional),type:Object(d.a)(e),transferStatus:l(e),transferStartDate:e.transfer_start_date?String(e.transfer_start_date):null,transferEndDate:a,whoisUpdateUnmodifiableFields:e.whois_update_unmodifiable_fields}},b=n("./lib/wp/browser.js"),g=n("./state/action-types.js"),j=n("./state/sites/actions.js"),y=n("../node_modules/@babel/runtime/helpers/defineProperty.js"),I=n.n(y),N=n("../node_modules/lodash-es/get.js"),R=n("./state/data-layer/wpcom-http/actions.js"),A=n("./state/data-layer/wpcom-http/utils.js"),T=n("./state/data-layer/handler-registry.js"),D=n("./state/notices/actions.js"),S=function(e){return function(t){return Object(R.a)({apiVersion:"1",method:"POST",path:"/domains/"+t.domain+"/privacy/"+e},t)}},O=function(e){return function(t){var n=t.siteId,a=t.domain,i=function(e){switch(e){case g.od:return Object(o.f)("Privacy has been successfully disabled!");case g.rd:return Object(o.f)("Yay, privacy has been successfully enabled!");case g.Tc:return Object(o.f)("Your contact information is now publicly visible!");case g.Wc:return Object(o.f)("Your contact information is now redacted!");default:return""}}(e);return[{type:e,siteId:n,domain:a},Object(D.f)(i,{duration:5e3})]}},h=function(e){return function(t,n){var a=t.siteId,i=t.domain,r=Object(N.a)(n,"message",Object(o.f)("Unknown error when updating the domain privacy settings"));return[{type:e,siteId:a,domain:i},Object(D.b)(r,{duration:2e4,id:"domain-privacy-settings-save-failure-notice",isPersistent:!0,href:"https://wordpress.com/help/contact",button:Object(o.f)("Get Help"),showDismiss:!1})]}};Object(T.b)("state/data-layer/wpcom/domains/privacy/index.js",(f={},I()(f,g.pd,[Object(A.a)({fetch:S("enable"),onSuccess:O(g.rd),onError:h(g.qd)})]),I()(f,g.md,[Object(A.a)({fetch:S("disable"),onSuccess:O(g.od),onError:h(g.nd)})]),I()(f,g.Rc,[Object(A.a)({fetch:S("disclose"),onSuccess:O(g.Tc),onError:h(g.Sc)})]),I()(f,g.Uc,[Object(A.a)({fetch:S("redact"),onSuccess:O(g.Wc),onError:h(g.Vc)})]),f));var v=i()("calypso:state:sites:domains:actions"),P=b.a.undocumented();function C(e){return function(t){return t(function(e){var t={type:g.Jq,siteId:e};return v("returning action: %o",t),t}(e)),P.site(e).domains().then((function(n){var a=n.domains,i=void 0===a?[]:a;t(function(e){var t={type:g.Lq,siteId:e};return v("returning action: %o",t),t}(e)),t(function(e,t){var n={type:g.Iq,siteId:e,domains:Object(r.a)(t,E)};return v("returning action: %o",n),n}(e,i))})).catch((function(n){var a=n instanceof Error?n.message:Object(o.f)("There was a problem fetching site domains. Please try again later or contact support.");t(function(e,t){var n={type:g.Kq,siteId:e,error:t};return v("returning action: %o",n),n}(e,a))}))}}function w(e,t){return{type:g.pd,siteId:e,domain:t}}function L(e,t){return{type:g.md,siteId:e,domain:t}}var M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a;return function(a){return v("setPrimaryDomain",e,t),P.setPrimaryDomain(e,t,(function(t,i){return t?n(t,i):a(C(e)).then((function(){n(null,i),a(Object(j.e)(e))}))}))}};function B(e,t){return{type:g.Rc,siteId:e,domain:t}}function U(e,t){return{type:g.Uc,siteId:e,domain:t}}},"./state/sites/domains/selectors.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return d}));var a=Object.freeze([]),i=function(e,t){return t&&e.sites.domains.items[t]||a},r=function(e){return e.sites.domains.items},s=function(e){var t;return null!==(t=e.allDomains.domains)&&void 0!==t?t:[]},o=function(e,t){var n,a,i;return Boolean(null==e||null===(n=e.sites)||void 0===n||null===(a=n.domains)||void 0===a||null===(i=a.items)||void 0===i?void 0:i[t])},c=function(e,t){return e.sites.domains.requesting[t]||!1},u=function(e){return e.sites.domains.requesting},d=function(e,t,n){var a,i,r,s;return null==e||null===(a=e.sites)||void 0===a||null===(i=a.domains)||void 0===i||null===(r=i.updatingPrivacy)||void 0===r||null===(s=r[t])||void 0===s?void 0:s[n]}},"./state/ui/actions/set-sites.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var a=n("./state/action-types.js");n("./state/data-layer/wpcom/sites/jitm/index.js");function i(e){return{type:a.mp,siteId:e}}function r(){return{type:a.mp,siteId:null}}}}]);